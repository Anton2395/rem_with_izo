  
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Con</title>
    <!-- <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="/assets/css/Data_con.css">
    <link rel="stylesheet" href="/assets/css/global_setting.css">
    <script   src="/assets/js/jquery-3.6.0.min.js"
              integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
              crossorigin="anonymous"></script>
</head>
<body>
    <div class="data_con">
        <div class="header_data_con">
            <h2>Data Con</h2>
            <a href="/connections"><button class="btn_back" type="submit"></button></a>
        </div>
        <div class="table_and_btn">
            <h5>Add connection</h5>
        
<form method="post" action="/add_con">
    <table class="input_add_con">
        <tr>
            <th>driver</th>
            <th><select class="driver_class" name="driver">
                    <option value="snap7">snap7</option>
                    <option value="node-red">node-red</option>
            </select></th>
        </tr>
        <tr>
           <th>name</th>
           <th><input type="text" name="name"></th> 
        </tr>
        <tr class="ipClass">
           <th>ip</th>
           <th><input pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}" name="ip"></th>
        </tr>
        <tr>
            <th>rack</th>
            <th><input type="number" name="rack"></th>
        </tr>
        <tr>
            <th>slot</th>
            <th><input type="number" name="slot"></th>
        </tr>
        <tr>
            <th>array</th>
            <th>
                <select class="class_array" name="arrays">
                    <option value="DB">DB</option>
                    <option value="PA">Process Outputs</option>
                </select>
            </th>
        </tr>
        <tr>
            <th>DB</th>
            <th><input type="number" class="class_db" name="DB"></th>
        </tr>
        <tr>
            <th>start</th>
            <th><input type="number" name="start"></th>
        </tr>
        <tr>
            <th>offset</th>
            <th><input type="number" name="offset"></th>
        </tr>

        
    </table>
    <div class="add_conn_btn">
        <button class="submit_btn" type="submit">Add</button>
    </div> 
</form>
</div>
</div>
<script>
    $('.driver_class').on('change',function() {
        var value = $(this).val();

        if (value == "node-red" && !$('.portClass')[0]){
            $('.ipClass').after($(`
                <tr class="portClass">
                    <th>port</th>
                    <th><input type="number" name="port"></th>
                </tr>
    `))
        };

        if (value == "snap7" && $('.portClass')[0]){
            $('.portClass').remove();
        };
    });

    $('.class_array').on('change',function (){
        var value = $(this).val();

        if (value == "PA") {
            $('.class_db').attr('readonly', true);
            $('.class_db').val(0);
        }
        else {
            $('.class_db').attr('readonly', false);
        }
    })

</script>
</body>
</html>